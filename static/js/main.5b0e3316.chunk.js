(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(e,t,n){e.exports=n(724)},333:function(e,t,n){},374:function(e,t){},376:function(e,t){},442:function(e,t){},443:function(e,t){},534:function(e,t){},535:function(e,t){},638:function(e,t){},724:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(326),u=n.n(c),s=(n(333),n(81)),l=n(9),o=n(31),i=n(5),f=n.n(i),p=n(26),m=n(30),d=n.n(m),b=n(48);function g(){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(f.a.mark(function e(){var t,n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.currentSession();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,Object(b.b)(t.webId);case 7:return n=e.sent,a=n.getSubject(t.webId),e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(f.a.mark(function e(){var t,n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:if((n=t.getRef(l.e.publicTypeIndex))&&"string"===typeof n){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,Object(b.b)(n);case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(f.a.mark(function e(t,n,a){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.addSubject()).addRef(l.c.type,l.e.TypeRegistration),r.addRef(l.e.instance,n.asRef()),r.addRef(l.e.forClass,a),e.abrupt("return",t.save([r]));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(f.a.mark(function e(){var t,n,a,r,c,u,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([g(),h()]);case 2:if(t=e.sent,n=Object(o.a)(t,2),a=n[0],r=n[1],null!==a&&null!==r){e.next=8;break}return e.abrupt("return",null);case 8:if("string"===typeof(c=a.getRef(l.f.storage))){e.next=11;break}return e.abrupt("return",null);case 11:return u=c+"public/notes.ttl",s=Object(b.a)(u),e.next=15,s.save();case 15:return e.next=17,w(r,s,l.d.TextDigitalDocument);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){var e=function(){var e=r.a.useState(),t=Object(o.a)(e,2),n=t[0],a=t[1];return r.a.useEffect(function(){h().then(function(e){null!==e&&a(e)})},[]),n}(),t=r.a.useState(),n=Object(o.a)(t,2),a=n[0],c=n[1];return r.a.useEffect(function(){e&&Object(p.a)(f.a.mark(function t(){var n,a,r,u;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.findSubject(l.e.forClass,l.d.TextDigitalDocument)){t.next=11;break}return t.next=4,y();case 4:if(null!==(a=t.sent)){t.next=7;break}return t.abrupt("return");case 7:return c(a),t.abrupt("return");case 11:if("string"===typeof(r=n.getRef(l.e.instance))){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,Object(b.b)(r);case 16:u=t.sent,c(u);case 18:case"end":return t.stop()}},t)}))()},[e]),a}var S=function(e){return(e.value.getString(l.a.status)||l.a.created)==l.a.completed?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"completed"},r.a.createElement("div",{className:"view"},r.a.createElement("input",{className:"toggle",type:"checkbox",onClick:function(){return e.changeStatus(l.a.created)},checked:!0}),r.a.createElement("label",null,e.value.getString(l.d.text)||""),r.a.createElement("button",{className:"destroy",onClick:function(){return e.onDelete()}})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"view"},r.a.createElement("input",{className:"toggle",type:"checkbox",onClick:function(){return e.changeStatus(l.a.completed)}}),r.a.createElement("label",null,e.value.getString(l.d.text)||""),r.a.createElement("button",{className:"destroy",onClick:function(){return e.onDelete()}}))))};function N(e,t){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(f.a.mark(function e(t,n){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.addSubject()).addRef(l.c.type,l.d.TextDigitalDocument),a.addLiteral(l.d.text,t),a.addLiteral(l.d.dateCreated,new Date(Date.now())),e.next=6,n.save([a]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var O=function(){var e=j(),t=r.a.useState(""),n=Object(o.a)(t,2),a=n[0],c=n[1],u=r.a.useState(),s=Object(o.a)(u,2),i=s[0],m=s[1];if(!e)return null;var d=function(e){return e.getSubjectsOfType(l.d.TextDigitalDocument)}(i||e);function b(){return(b=Object(p.a)(f.a.mark(function t(n){var r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,N(a,i||e);case 5:r=t.sent,m(r),c("");case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function g(){return(g=Object(p.a)(f.a.mark(function t(n){var a,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i||e){t.next=3;break}return t.abrupt("return");case 3:return a.removeSubject(n.asRef()),t.next=6,a.save();case 6:r=t.sent,m(r);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function v(){return(v=Object(p.a)(f.a.mark(function t(n,a){var r,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i||e){t.next=3;break}return t.abrupt("return");case 3:return n.setLiteral(l.a.status,a),n.setLiteral(l.d.dateModified,new Date(Date.now())),t.next=7,r.save();case 7:return c=t.sent,m(c),t.abrupt("return",c.getSubject(n.asRef()));case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}var h=d.sort(T).map(function(e){return r.a.createElement(S,{value:e,onDelete:function(){!function(e){g.apply(this,arguments)}(e)},changeStatus:function(t){!function(e,t){v.apply(this,arguments)}(e,t)}})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Todos"),r.a.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.a.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",value:a,onChange:function(e){e.preventDefault(),c(e.target.value)}}))),r.a.createElement("section",{className:"main"},r.a.createElement("ul",{className:"todo-list"},h)),r.a.createElement("footer",{className:"footer"},r.a.createElement("span",{className:"todo-count"},r.a.createElement("strong",null,d.filter(function(e){return l.a.completed!=e.getString(l.a.status)}).length)," items left")))};function T(e,t){var n=e.getDateTime(l.d.dateCreated),a=t.getDateTime(l.d.dateCreated);return n instanceof Date&&a instanceof Date?a.getTime()-n.getTime():0}var C=function(){var e=function(){var e=r.a.useState(),t=Object(o.a)(e,2),n=t[0],a=t[1];return r.a.useEffect(function(){g().then(function(e){null!==e&&a(e)})},[]),n}(),t=e?e.getString(l.b.name):null;t&&"Public Todos for ".concat(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"todoapp"},r.a.createElement(O,null)))},R=URLSearchParams&&document.location.search?new URLSearchParams(document.location.search).get("webid"):null,L=function(){var e=r.a.useState(R),t=Object(o.a)(e,2),n=t[0],a=t[1];if(R){return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n&&d.a.login(n)}},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{htmlFor:"webid",className:"label"},"Your WebID:"),r.a.createElement("input",{type:"url",name:"webid",id:"webid",className:"input is-large",value:n||"",onChange:function(e){e.preventDefault(),a(e.target.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"submit",className:"button is-primary is-large",value:"Connect"}))))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.LoginButton,{popup:"popup.html",className:"button is-large is-primary"},"Connect"))},F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.LoggedOut,null,r.a.createElement("section",{className:"section"},r.a.createElement("p",{className:"content"},"Please connect to your Pod to start taking Todos."),r.a.createElement("p",{className:"content"},r.a.createElement(L,null)))),r.a.createElement(s.LoggedIn,null,r.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[328,1,2]]]);
//# sourceMappingURL=main.5b0e3316.chunk.js.map