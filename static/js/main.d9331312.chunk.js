(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{328:function(e,t,n){e.exports=n(724)},333:function(e,t,n){},374:function(e,t){},376:function(e,t){},442:function(e,t){},443:function(e,t){},534:function(e,t){},535:function(e,t){},638:function(e,t){},724:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(326),u=n.n(c),s=(n(333),n(81)),o=n(5),l=n.n(o),i=n(30),f=n(41),m=n(12),p=function(e){var t=e.todo.getString(m.a.status)===m.a.completed,n="";return t&&(n="completed"),r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:n},r.a.createElement("div",{className:"view"},r.a.createElement("input",{className:"toggle",type:"checkbox",checked:t,onChange:e.changeStatus}),r.a.createElement("label",null,e.todo.getString(m.c.text)||""),r.a.createElement("button",{className:"destroy",onClick:e.onDelete}))))},d=n(48),b=n(29),g=n.n(b);function v(){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.currentSession();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,Object(d.b)(t.webId);case 7:return n=e.sent,a=n.getSubject(t.webId),e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:if((n=t.getRef(m.d.publicTypeIndex))&&"string"===typeof n){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,Object(d.b)(n);case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(l.a.mark(function e(t,n,a){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.addSubject()).addRef(m.b.type,m.d.TypeRegistration),r.addRef(m.d.instance,n.asRef()),r.addRef(m.d.forClass,a),e.abrupt("return",t.save([r]));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(l.a.mark(function e(){var t,n,a,r,c,u,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([v(),E()]);case 2:if(t=e.sent,n=Object(f.a)(t,2),a=n[0],r=n[1],null!==a&&null!==r){e.next=8;break}return e.abrupt("return",null);case 8:if("string"===typeof(c=a.getRef(m.e.storage))){e.next=11;break}return e.abrupt("return",null);case 11:return u=c+"public/notes.ttl",s=Object(d.a)(u),e.next=15,s.save();case 15:return e.next=17,w(r,s,m.c.TextDigitalDocument);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e){var t=function(){var e=r.a.useState(),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.useEffect(function(){E().then(function(e){null!==e&&a(e)})},[]),n}();r.a.useEffect(function(){t&&Object(i.a)(l.a.mark(function n(){var a,r,c,u;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.findSubject(m.d.forClass,m.c.TextDigitalDocument)){n.next=11;break}return n.next=4,k();case 4:if(null!==(r=n.sent)){n.next=7;break}return n.abrupt("return");case 7:return e(r),n.abrupt("return");case 11:if("string"===typeof(c=a.getRef(m.d.instance))){n.next=14;break}return n.abrupt("return");case 14:return n.next=16,Object(d.b)(c);case 16:u=n.sent,e(u);case 18:case"end":return n.stop()}},n)}))()},[t])}var D=function(){var e=r.a.useState(),t=Object(f.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),u=Object(f.a)(c,2),s=u[0],o=u[1];if(N(a),!n)return null;var d=n.getSubjectsOfType(m.c.TextDigitalDocument);function b(){return(b=Object(i.a)(l.a.mark(function e(t){var r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.trim().length){e.next=3;break}return e.abrupt("return");case 3:if(!n){e.next=13;break}return(r=n.addSubject()).addRef(m.b.type,m.c.TextDigitalDocument),r.addLiteral(m.c.text,s),r.addLiteral(m.c.dateCreated,new Date(Date.now())),e.next=10,n.save([r]);case 10:c=e.sent,a(c),o("");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(){return(g=Object(i.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return n.removeSubject(t.asRef()),e.next=4,n.save();case 4:r=e.sent,a(r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(){return(v=Object(i.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R(t)?t.setLiteral(m.a.status,m.a.created):t.setLiteral(m.a.status,m.a.completed),!n){e.next=6;break}return e.next=4,n.save();case 4:r=e.sent,a(r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var h=d.sort(S).sort(O).map(function(e){return r.a.createElement(p,{key:e.asRef(),todo:e,onDelete:function(){!function(e){g.apply(this,arguments)}(e)},changeStatus:function(){!function(e){v.apply(this,arguments)}(e)}})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Todos"),r.a.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.a.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",value:s,onChange:function(e){e.preventDefault(),o(e.target.value)}}))),r.a.createElement("section",{className:"main"},r.a.createElement("ul",{className:"todo-list"},h)),r.a.createElement("footer",{className:"footer"},r.a.createElement("span",{className:"todo-count"},r.a.createElement("strong",null,d.filter(function(e){return!R(e)}).length)," items left")))};function S(e,t){var n=e.getDateTime(m.c.dateCreated),a=t.getDateTime(m.c.dateCreated);return n instanceof Date&&a instanceof Date?a.getTime()-n.getTime():0}function O(e,t){return R(e)===R(t)?0:R(e)&&!R(t)?1:-1}function R(e){return m.a.completed===e.getString(m.a.status)}var T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"todoapp"},r.a.createElement(D,null)))},C=URLSearchParams&&document.location.search?new URLSearchParams(document.location.search).get("webid"):null,L=function(){var e=r.a.useState(C),t=Object(f.a)(e,2),n=t[0],a=t[1];if(C){return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n&&g.a.login(n)}},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{htmlFor:"webid",className:"label"},"Your WebID:"),r.a.createElement("input",{type:"url",name:"webid",id:"webid",className:"input is-large",value:n||"",onChange:function(e){e.preventDefault(),a(e.target.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"submit",className:"button is-primary is-large",value:"Connect"}))))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.LoginButton,{popup:"popup.html",className:"button is-large is-primary"},"Connect"))},F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.LoggedOut,null,r.a.createElement("section",{className:"section"},r.a.createElement("p",{className:"content"},"Please connect to your Pod to start taking Todos."),r.a.createElement("p",{className:"content"},r.a.createElement(L,null)))),r.a.createElement(s.LoggedIn,null,r.a.createElement(T,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[328,1,2]]]);
//# sourceMappingURL=main.d9331312.chunk.js.map